!function(i,e){"use strict";var n,a,o;i.fn.wpvColorPicker=function(){return n||(n=i('<div id="wpv-colorpicker"></div>').hide(),i("body").append(n),o=i.farbtastic("#wpv-colorpicker"),n.append(function(){return i('<a class="transparent">transparent</a>').click(function(){a&&(i(a).val("transparent").css({background:"white"}),n.fadeOut())})})),i("[type=color], .wpv-color-input",this).not(".wpv-colorpicker").each(function(){i(this).prop("type","text").addClass("wpv-colorpicker"),o.linkTo(this)}).on("focus",null,function(){a&&i(a).removeClass("colorwell-selected");var t=this;o.linkTo(function(e){i(t).val(e).change()}),n.css({position:"absolute",left:i(this).offset().left+i(this).outerWidth(),top:i(this).offset().top}).fadeIn(),i(a=this).addClass("colorwell-selected")}).on("blur",null,function(){n.fadeOut()}).on("change keyup",null,function(){i(this).css({"background-color":i(this).val()})}),this}}(jQuery),function(f,e){"use strict";f.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-get-icon-list"},success:function(e){window.VamtamIconsCache=e,f(document).trigger("vamtam-icons-loaded")}}),f.fn.wpvIconsSelector=function(t){var i,p,n=f(".wpv-config-icons-selector",this);return function(){var e=/MSIE (\d+)/.exec(navigator.userAgent);if(!e||8===e[1]){var t=function(){n.find(":radio.checked").removeClass("checked"),n.find(":checked").addClass("checked")};n.find(":radio").unbind("change.wpvicons").bind("change.wpvicons",t),t()}}(),i=function(t,e){var i=t.find(":checked"),n=i.val(),a=i.prop("name")||(new Date).getTime().toString(16),o=t.find(".icons-wrapper");i.remove();var s,c,l,r;for(var d in e)o.append((c=e[s=d],l=void 0,l=f('<input type="radio" />').attr("name",a).attr("id",a+s).val(s),r=f('<label class="single-icon" />').attr("for",a+s).html(c),s===n&&l.prop("checked",!0),l.add(r)));o.removeClass("spinner"),t.addClass("icons-loaded").find(".icons-filter").bind("change paste keydown keyup search",function(){var e=f(this).val().toLowerCase();t.find("label:has(span[title])").show().each(function(){f(this).find("span").attr("title").toLowerCase().match(e)||f(this).hide()})}),setTimeout(function(){p(t)},100)},p=function(e){e.each(function(){var e=f(this).find(":checked + label");f(this).find(".icons-wrapper").scrollTop(0),f(this).find(".icons-wrapper").scrollTop((e?e.offset().top:0)-f(this).find(".icons-wrapper").offset().top)})},n.filter(":not(.icons-loaded)").each(function(){var e=f(this);window.VamtamIconsCache?i(e,window.VamtamIconsCache):f(document).one("vamtam-icons-loaded",function(){i(e,window.VamtamIconsCache)})}),n.filter(".icons-loaded").each(function(){var e=f(this);if("string"==typeof t)switch(t){case"scroll":p(e)}}),this}}(jQuery),function(a,e){"use strict";a.fn.wpvBackgroundOption=function(){return a(this).find(".wpv-config-row.background:not(.wpvbg-loaded)").each(function(){var e=a(this).addClass("wpvbg-loaded"),t=e.find(".bg-block.bg-size"),i=e.find(".bg-block.bg-repeat"),n=e.find(".bg-block.bg-position");t.find("input").bind("change",function(){i.add(n).show(),"cover"===a(":checked",t).val()&&i.add(n).hide()}).change()}),this}}(jQuery),function(o,e){"use strict";o(function(){var a=o(".widget-liquid-right");a.append(o("#wpv-add-sidebar-ui").html()),a.find(".sidebar-vamtam-custom").append(function(){return o('<span class="wpv-delete-sidebar"></span>').click(function(){if(confirm("Are you sure you want to delete this widget area?")){var e=o(this).parent(),t=e.find(".widgets-sortables").attr("id").replace(/-(right|left)$/,"").replace(/^wpv_sidebar-/,""),i=e.find(".sidebar-name h2"),n=o.trim(i.text()).replace(/ \([^\)]+\)$/,"");i.find(".spinner").addClass("wpv-active-spinner"),o.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-delete-widget-area",name:n,_wpnonce:a.find('input[name="wpv-sidebars-nonce"]').val()},success:function(){e.parent().find(".sidebar-vamtam-custom:has(#wpv_sidebar-"+t+"-right), .sidebar-vamtam-custom:has(#wpv_sidebar-"+t+"-left)").slideUp()}})}})})})}(jQuery),function(n,e){"use strict";n.WPV=n.WPV||{},n.WPV.upload={init:function(){var i;n(document).on("click",".wpv-upload-button",function(e){var t=n(this).attr("data-target");(i=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:n(this).hasClass("wpv-video-upload")?"video":"image"}})).on("select",function(){var e=i.state().get("selection").first();n.WPV.upload.fill(t,e.attributes.url)}),i.open(),e.preventDefault()}),n(document).on("click",".wpv-upload-clear",function(e){n.WPV.upload.remove(n(this).attr("data-target")),e.preventDefault()}),n(document).on("click",".wpv-upload-undo",function(e){n.WPV.upload.undo(n(this).attr("data-target")),e.preventDefault()})},fill:function(e,t){if(/^\s*$/.test(t))n.WPV.upload.remove(e);else{var i=n("#"+e);i.data("undo",i.val()),i.val(t),i.siblings(".wpv-upload-clear, .wpv-upload-undo").css({display:"inline-block"}),n.WPV.upload.preview(e,t)}},preview:function(e,t){n("#"+e+"_preview").parents(".upload-basic-wrapper").addClass("active"),n("#"+e+"_preview").find("img").attr("src",t).css({display:"inline-block"})},remove:function(e){var t=n("#"+e);n("#"+e+"_preview").find("img").attr("src","").hide(),n("#"+e+"_preview").parents(".upload-basic-wrapper").removeClass("active"),t.data("undo",t.val()).val("").siblings(".wpv-upload-undo").css({display:"inline-block"}).siblings(".wpv-upload-clear").hide()},undo:function(e){var t=n("#"+e);this.preview(e,t.data("undo")),t.val(t.data("undo")),t.data("undo","").siblings(".wpv-upload-undo").hide();var i=t.siblings(".wpv-upload-clear");0===t.val().length&&i.is(":visible")?i.hide():0<t.val().length&&i.is(":hidden")&&i.css({display:"inline-block"})}}}(jQuery),function(o,e){"use strict";o.WPV=o.WPV||{},o.WPV.icon_manager={init:function(){var t,i;o(document).on("click",".vamtam-upload-icon-font",function(e){(t=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:"application/zip"}})).on("select",function(){var e=t.state().get("selection").first();i=e.id,o(".vamtam-icon-font-setup .step-1 .step-in-progress").text(e.attributes.filename).show(),o(".vamtam-icon-font-setup .postbox-container.step-2").removeClass("inactive")}),t.open(),e.preventDefault()}),o(document).on("click",".vamtam-process-icon-font",function(e){e.preventDefault();var a=o(this);a.siblings(".step-in-progress").show(),o.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-process-icon-font",selected:i,_ajax_nonce:o(this).data("nonce")},dataType:"json",success:function(e){a.siblings(".step-in-progress").hide();var t="";if("error"in e)t=e.error;else for(var i in e){t+="custom-"+i+': <svg width="32" height="32" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">';for(var n=0;n<e[i].length;n++)t+='<path d="'+e[i][n]+'" fill="#666"/>';t+="</svg><br>"}o(".vamtam-icon-font-setup .postbox-container.step-3").removeClass("inactive").find(".result-generated").html(t).parent().show()}})})}},o.WPV.icon_manager.init()}(jQuery),function(i,e){"use strict";i.WPV=i.WPV||{},i.WPV.horizontal_blocks={init:function(){i(".horizontal_blocks .wpv-range-input").change(function(){i.WPV.horizontal_blocks.set_active(i(this).val(),i(this).attr("id"))}),i(".horizontal_blocks select").change(function(){i.WPV.horizontal_blocks.resize(i(this).parents(".block").parent(),i(this).val())}),i('.horizontal_blocks [name*="last"]').change(function(){var e=i(this).parents(".block").parent();e.is(".last")!==i(this).is(":checked")&&i.WPV.horizontal_blocks.toggle_last(e)})},set_active:function(e,t){i('[rel="'+t+'"]').removeClass("active"),i('[rel="'+t+'"]:lt('+e+")").addClass("active")},resize:function(e,t){e.removeClass(e.attr("data-width")).addClass(t).attr("data-width",t),"full"===t?e.find("label").hide():e.find("label").show()},toggle_last:function(e){e.is(".last")?e.removeClass("last").next().remove():e.addClass("last").after('<div class="clearboth"></div>')}}}(jQuery),function(n,e){"use strict";0!==n("#wpv-tmpl-social-link").length&&(n.WPV=n.WPV||{},n.WPV.Views=n.WPV.Views||{},n.WPV.Models=n.WPV.Models||{},n.WPV.Collections=n.WPV.Collections||{},n.WPV.Models.SocialLink=Backbone.Model.extend({defaults:{"icon-name":"","icon-text":"","icon-link":""}}),n.WPV.Collections.SocialLinks=Backbone.Collection.extend({model:n.WPV.Models.SocialLink}),n.WPV.Views.SocialLinkView=Backbone.View.extend({tagName:"tr",template:_.template(n("#wpv-tmpl-social-link").html()),events:{"change select":"save","change input":"save","keydown input":"save","click .icon-change":"changeIcon"},save:function(){var e={};for(var t in this.model.attributes){var i=this.$el.find('[name="'+t+'"]');i.length&&(e[t]=i.val())}this.model.set(e),this.options.parent.$el.next("textarea.data").val(JSON.stringify(this.model.collection)),this.render()},render:function(){for(var e in this.$el.html(this.template(this.model.attributes)),this.model.attributes){var t=this.model.attributes[e];this.$el.find('[name="'+e+'"]').val(t)}return this.$el.find(".icon-preview").html(window.VamtamIconsCache[this.model.attributes["icon-name"]]),this},changeIcon:function(e){e.preventDefault();var t=this.options.parent.$el.addClass("hidden"),i=t.prev(".wpv-config-icons-selector").removeClass("hidden"),n=this;i.find('[value="'+this.model.attributes["icon-name"]+'"]').prop("checked",!0).change(),i.parent().wpvIconsSelector("scroll"),i.find(":radio").bind("change.wpv-social-links",function(){t.removeClass("hidden"),i.addClass("hidden"),n.$el.find('[name="icon-name"]').val(i.find(":checked").val()).change(),i.find(":radio").unbind("change.wpv-social-links")})}}),n.WPV.Views.SocialLinksView=Backbone.View.extend({template:_.template(n("#wpv-tmpl-social-links").html()),events:{"click .add-new-icon":"addNew"},initialize:function(){this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.render),this.render()},render:function(){this.$el.html(this.template());var i=this.$el.find(".current-icons");return this.collection.each(function(e){var t=new n.WPV.Views.SocialLinkView({model:e,parent:this});i.append(t.render().$el)},this),this},addNew:function(e){e.preventDefault(),this.collection.add(new this.collection.model)}}),n(document).one("vamtam-icons-loaded",function(){n(".wpv-config-row.social-links").each(function(){var e=n.parseJSON(n("textarea.data",this).val()),t=n(this);new n.WPV.Views.SocialLinksView({el:n(".social-links-builder",t),collection:new n.WPV.Collections.SocialLinks(e)})})}))}(jQuery),function(c,e){"use strict";c.WPV=c.WPV||{},c(function(){function a(e){var t=c.parseJSON(c(e).attr("data-fields")),i=!0;for(var n in t){var a=c('[name="'+n+'"]');if(a.is(":checkbox")){if(!!t[n]!==a.is(":checked")){i=!1;break}}else if(!a.val()||!t[n]||a.val().toString()!==t[n].toString()){i=!1;break}}i&&c(e).addClass("selected")}function e(e){var i=c(e).closest(".wpv-config-row.font"),n=i.find(".font-preview"),t=function(){var t=document.createElement("LINK");t.rel="stylesheet",t.type="text/css",i.find(".font-styles").html("")[0].appendChild(t),c.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-font-preview",face:i.find(".face").val(),weight:i.find(".weight").val()},success:function(e){t.href=e,n.css({font:a,color:i.find(".wpv-color-input").val()})}})};if(c(e).is(".wpv-color-input"))n.css("color",i.find(".wpv-color-input").val());else{var a=i.find(".weight").val()+" "+i.find(".size").val()+"px/"+i.find(".lheight").val()+'px "'+i.find(".face").val()+'"';if(c(e).hasClass("face")){var o=i.find(".weight"),s=o.val();o.empty(),c(WPV_ADMIN.fonts[c(e).val()].weights).each(function(e,t){o.append("<option>"+t+"</option>")}),o.val(s),t()}else c(e).hasClass("weight")?t():n.css({font:a,color:i.find(".wpv-color-input").val()})}}c("body").wpvColorPicker().wpvIconsSelector().wpvBackgroundOption(),c(".wpv-range-input").uirange(),i.init(),c.WPV.horizontal_blocks.init(),c.WPV.upload.init(),c(document).on("change select","[data-field-filter]",function(){var e=c(this).attr("data-field-filter"),t=c(":checked",this).val();c(this).closest(".wpv-config-group").find("."+e).filter(":not(.hidden)").show().filter(":not(."+e+"-"+t+")").hide()}),c("[data-field-filter]").change(),c("body").on("click",".vamtam-check-license",function(e){var t=c(this);t.hasClass("disabled")||(t.siblings().remove(),t.css("display","inline-block").addClass("disabled"),t.after('<span class="spinner" style="display:inline-block;float:none" />'),c.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-check-license","license-key":c("#envato-license-key").val(),nonce:c(this).attr("data-nonce")},success:function(e){t.removeClass("disabled").siblings().remove(),t.after(c("<p />").addClass("vamtam-check-license-help").append("<hr />").append(t.data("full-info"))),t.after(c("<p />").addClass("vamtam-check-license-response").append("<hr />").append(e))}}),e.preventDefault())}),c("body").on("click",".wpv-icon-selector-trigger",function(e){var n=c("#wpwrap > .wpv-config-icons-selector"),a=c(this);c.magnificPopup.open({type:"inline",items:{src:n},closeOnBgClick:!1,callbacks:{open:function(){n.show()},close:function(){n.hide()}}}),n.find('[value="'+c(this).data("icon-name")+'"]').prop("checked",!0).change(),n.parent().wpvIconsSelector("scroll"),n.find(":radio").bind("change.wpv-icons-selector",function(){var e=n.find(":checked"),t=e.val();c.magnificPopup.close(),a.data("icon-name",t);var i=a.find("+ input");i&&i.val(t),a.html(e.next().find("span").html()),a.removeClass("theme no-icon"),t.match(/^theme-/)?a.addClass("theme"):t.match(/^\s*$/)&&a.addClass("no-icon").html(""),n.find(":radio").unbind("change.wpv-icons-selector");try{c.WPVED.saveHTML()}catch(e){}}),e.preventDefault()}),c(document).on("change",".social_icon_select_sites",function(){var e=c(this).closest("p").siblings(".social_icon_wrap");e.children("p").hide(),c("option:selected",this).each(function(){e.find(".social_icon_"+c(this).val()).show()})}),c(document).on("change",".num_shown",function(){var e=c(this).closest("p").siblings(".hidden_wrap");e.children("div").hide(),c(".hidden_el:lt("+c(this).val()+")",e).show()}),c(".metabox").each(function(){var t=c("<ul>").addClass("wpv-meta-tabs");c(".config-separator:first",this).before(t),c(".config-separator",this).each(function(){var e=c(this).text().replace(/[\s\n]+/g,"").toLowerCase();c(this).nextUntil(".config-separator").wrapAll('<div class="wpv-meta-part" id="tab-'+e+'"></div>'),c(this).css("cursor","pointer"),c(this).next().is(".wpv-meta-part")&&t.append('<li class="wpv-meta-tab '+c(this).attr("data-tab-class")+'"><a href="#tab-'+e+'" title="">'+c(this).text()+"</a></li>"),c(this).remove()}),1<t.children().length?t.closest(".metabox").tabs():t.hide()}),c("#wpv-config").tabs({activate:function(e,t){var i=t.newTab.context.hash,n=c(i);n.attr("id",""),window.location.hash=i,n.attr("id",i.replace("#","")),c(".save-wpv-config").show(),t.newTab.hasClass("nosave")&&c(".save-wpv-config").hide()},create:function(e,t){t.tab.hasClass("nosave")&&c(".save-wpv-config").hide()}}),c("body").on("click",".info-wrapper > a",function(e){var t=c(this).attr("data-other");c(this).attr("data-other",c(this).text()).text(t),c(this).siblings(".desc").slideToggle(200),e.preventDefault()}),c("body").on("click",".wpv-autofill",function(){c(this).addClass("selected").siblings().removeClass("selected");var e=c.parseJSON(c(this).attr("data-fields")),t=c(this).closest(".wpv-config-group");for(var i in e){var n=t.find('[name="'+i+'"]');n.is(":checkbox")?1===e[i]?n.attr("checked","checked"):n.attr("checked",!1):(n.val(e[i]),n.is(".image-upload")&&c.WPV.upload.fill(n.attr("id"),e[i])),n.change()}return!1}),c(".wpv-autofill").each(function(){a(this);var e=this,t=c.parseJSON(c(e).attr("data-fields")),i=function(){c(e).removeClass("selected"),a(e)};for(var n in t)c("#"+n).change(i)}),c(".wpv-config-row.body-layout label").click(function(){c(this).addClass("selected"),c(this).parent().siblings().find("label").removeClass("selected")}),c(".wpv-config-row.body-layout input").change(function(){c(this).is(":checked")&&c('label[for="'+c(this).attr("id")+'"]').click()}),c(document).on("click","label img",function(){c("#"+c(this).parents("label").attr("for")).click()}),c(".wpv-config-row.font input, .wpv-config-row.font select").bind("change",function(){e(this)}),setTimeout(function(){c(".wpv-config-row.font").each(function(){e(c(".face",this)[0])})},0),c("#wpv-ajax-overlay, #wpv-ajax-content").remove(),c(".wpv-config-page form").submit(function(){return c("body").append('<div id="wpv-ajax-overlay"></div><div id="wpv-ajax-content">Saving</div>'),c.post(ajaxurl,c(this).serialize(),function(e){c("#wpv-ajax-content").html(e),setTimeout(function(){c("#wpv-ajax-overlay, #wpv-ajax-content").fadeOut(300,function(){c("#wpv-ajax-overlay, #wpv-ajax-content").remove()})},1e3)}),!1})});var i={init:function(){c("#export-config").click(function(){var e=c("#export-config-name").val().replace(/^\s+/,"").replace(/\s+$/,"");e.length&&i.save(c("#export-config-prefix").val()+"_"+e)}).parent().append('<span class="result"></span>'),c("#import-config").click(function(){window.confirm("Are you sure you want to import a skin? You will lose any changes you've made since you last exported a skin.")&&i.load(c("#import-config-available").val())}).parent().append('<span class="result"></span>'),c("#delete-config").click(function(){!c("#import-config-available").val().match(/^\s+$/)&&window.confirm("Are you sure you want to delete this? It's permanent")&&i.del(c("#export-config-prefix").val()+"_"+c("#import-config-available :selected").text())}),this.get_available()},save:function(e){if(!e.match(/^\s*$/)){var t=c("#export-config").closest(".wpv-config-row").find(".spinner").css({display:"inline-block"});c.post(ajaxurl,{action:"wpv-save-skin",file:e},function(e){i.get_available(),t.hide(),c("#export-config").parent().find(".result").html(e),setTimeout(function(){c("#export-config").parent().find(".result").fadeOut("fast",function(){c(this).html("").show()})},5e3)})}},get_available:function(){c.post(ajaxurl,{action:"wpv-available-skins",prefix:c("#export-config-prefix").val()},function(e){c("#import-config-available").html(e)})},del:function(e){var t=c("#import-config").closest(".wpv-config-row").find(".spinner").css({display:"inline-block"});c.post(ajaxurl,{action:"wpv-delete-skin",file:e},function(e){i.get_available(),t.hide(),c("#import-config").parent().find(".result").html(e),setTimeout(function(){c("#import-config").parent().find(".result").fadeOut("fast",function(){c(this).html("").show()})},3e3)})},load:function(e){var t=c("#import-config").closest(".wpv-config-row").find(".spinner").css({display:"inline-block"});c.post(ajaxurl,{action:"wpv-load-skin",file:e,name:c("#import-config-available :selected").text()},function(e){!function(e){for(var t in e){var i="object"==typeof e[t]?"[]":"",n=c('[name="'+t+i+'"]');n.is(".static")||(n.is(":radio")?n.filter('[value="'+e[t]+'"]').attr("checked",!0).change():n.is(":checkbox")?1===e[t]?n.attr("checked",!0):n.attr("checked",!1):(n.val(e[t]).change(),n.is("[type=color]")&&n.trigger("keyup")),n.is(".image-upload")&&c.WPV.upload.fill(n.attr("id"),e[t]))}}(e.data),t.hide(),c("#import-config").parent().find(".result").html(e.text),setTimeout(function(){c("#import-config").parent().find(".result").fadeOut("fast",function(){c(this).html("").show()})},3e3)},"json")}}}(jQuery),function(o,e){"use strict";o(function(){_.each([{options:"#vamtam-post-format-options",select:"#post-formats-select"},{options:"#vamtam-portfolio-format-options",select:"#vamtam-portfolio-formats-select"}],function(e){var t=o(e.options);if(t.length){var n=t.find(".wpv-meta-tabs").hide(),a=o(e.select);a.find(":radio").change(function(){var e=a.find(":checked"),t=e.prop("id")||"post-format-"+e.val(),i=n.find("li.wpv-"+t+" a");i.click(),n.parent().find(".wpv-config-row.wpv-all-formats").appendTo(o(i.attr("href")))}).change(),t.insertBefore(o("#postdivrich")).addClass("wpv-repositioned")}})})}(jQuery);